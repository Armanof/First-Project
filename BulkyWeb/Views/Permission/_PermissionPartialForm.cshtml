@model Bulky_DTO.Identity.PermissionDTO

<div class="space-y-4">
    
    <div>
        <label asp-for="Name" class="block text-sm font-medium text-gray-700">Permission Name</label>
        <input asp-for="Name" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
        <span asp-validation-for="Name" class="text-red-500 text-sm"></span>
    </div>

    
    <div>
        <label asp-for="F_ParentId" class="block text-sm font-medium text-gray-700">Parent Permission</label>
        <select asp-for="F_ParentId" asp-items="ViewBag.Permissions" class="w-full border rounded px-3 py-2">
            <option value="">-- Select Parent Permission --</option>
            @if (ViewBag.PermissionList != null)
            {
                foreach (var permission in ViewBag.PermissionList)
                {
                    <option value="@permission.Id" selected="@(Model != null && Model.F_ParentId == permission.Id)">@permission.Name</option>
                }
            }
        </select>
        <span asp-validation-for="F_ParentId" class="text-red-500 text-sm"></span>
    </div>

    
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Select EndPoints</label>
        <div class="overflow-x-auto rounded border border-gray-300">
            <table class="min-w-full divide-y divide-gray-200" id="endpointsTable">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 py-2 text-left">
                            <input type="checkbox" id="selectAllEndpoints" />
                        </th>
                        <th class="px-4 py-2 text-left">Controller</th>
                        <th class="px-4 py-2 text-left">Action</th>
                        <th class="px-4 py-2 text-left">Endpoint Name</th>
                        <th class="px-4 py-2 text-left">HTTP Method</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    @if (ViewBag.PermissionEndPoint != null)
                    {
                        foreach (var ep in ViewBag.PermissionEndPoint)
                        {
                            var isChecked = Model.PermissionEndPoints?.Any(x => x.Id == ep.Id) == true ? "checked" : "";
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2">
                                    <input type="checkbox" name="SelectedEndPointIds" value="@ep.Id" @isChecked class="endpoint-checkbox" />
                                </td>
                                <td class="px-4 py-2">@ep.ControllerName</td>
                                <td class="px-4 py-2">@ep.ActionName</td>
                                <td class="px-4 py-2">@ep.EndPointName</td>
                                <td class="px-4 py-2">@ep.HttpMethod</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>